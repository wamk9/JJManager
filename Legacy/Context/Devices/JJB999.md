# Contexto: ButtonBox JJB999

## Visão Geral
ButtonBox profissional com protocolo de comunicação byte-based via HID.

## Características
- **Firmware:** v2024.11.29
- **Conexão:** HID (HidSharp)
- **Protocolo:** Byte-based (idêntico ao JJB01_V2)
- **LED:** 1 LED RGB controlável

## Histórico de Desenvolvimento

### 2025-12-25: Migração para Protocolo Byte-Based
**Objetivo:** Substituir protocolo JSON por byte-based, alinhando com JJB01_V2.

#### Implementação
- Protocolo **IDÊNTICO** ao JJB01_V2
- Mesmos comandos (LED Mode, Brightness, Blink Speed, Pulse Delay)
- Mesmo sistema de Keep-Alive (3s cliente / 5s timeout firmware)
- Mesmo change tracking para otimização

## Protocolo de Comunicação

Ver documentação completa em [JJB01_V2.md](./JJB01_V2.md) - o protocolo é **100% idêntico**.

### Comandos Suportados
| CMD | Descrição |
|-----|-----------|
| 0x0000 | LED Mode (0-4) |
| 0x0001 | Brightness (0-255) |
| 0x0002 | Blink Speed (0-255) |
| 0x0003 | Pulse Delay (0-255) |
| 0x00FF | Device Info Request |

### FLAGS
- **FLAG_H:** Sempre 0x20
- **FLAG_L:** Sempre igual a CMD_L (validação)

## Arquivos Relacionados
- **Device Class:** `Class/Devices/JJB999.cs`
- **UI Page:** `Pages/Devices/JJB999.Designer.cs`, `JJB999.cs`, `JJB999.resx`
- **Firmware:** `D:\OneDrive\JohnJohn3D\02 - Producao\01 - Sim Racing\16 - ButtonBox JJB-999\02 - Source\02 - Programacao\JJB999_code_2025-12-26\`

## Diferenças vs JJB01_V2
Nenhuma diferença significativa no protocolo ou implementação. Ambos os dispositivos compartilham:
- Mesma base de código de comunicação HID
- Mesmo parser de comandos byte-based
- Mesmos métodos de envio/recebimento
- Mesma UI de configuração

## Documentação Adicional
- [Protocolo HID Completo](Connections/HID.md) - Especificação detalhada compartilhada com JJB01_V2
